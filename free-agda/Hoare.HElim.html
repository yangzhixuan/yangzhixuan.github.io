<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Hoare.HElim</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Markup">\begin{code}</a>
<a id="14" class="Symbol">{-#</a> <a id="18" class="Keyword">OPTIONS</a> <a id="26" class="Pragma">--safe</a> <a id="33" class="Pragma">--experimental-lossy-unification</a> <a id="66" class="Symbol">#-}</a>

<a id="71" class="Keyword">open</a> <a id="76" class="Keyword">import</a> <a id="83" href="Prelude.html" class="Module">Prelude</a> <a id="91" class="Keyword">renaming</a> <a id="100" class="Symbol">(</a><a id="101" href="Agda.Builtin.Unit.html#201" class="InductiveConstructor">tt</a> <a id="104" class="Symbol">to</a> <a id="107" class="InductiveConstructor">⟨⟩</a><a id="109" class="Symbol">)</a>
<a id="111" class="Keyword">open</a> <a id="116" class="Keyword">import</a> <a id="123" href="Signatures.html" class="Module">Signatures</a>
<a id="134" class="Keyword">open</a> <a id="139" class="Keyword">import</a> <a id="146" href="FinitenessConditions.html" class="Module">FinitenessConditions</a>
<a id="167" class="Keyword">open</a> <a id="172" class="Keyword">import</a> <a id="179" href="FreeMonad.PackagedTheory.html" class="Module">FreeMonad.PackagedTheory</a>
<a id="204" class="Keyword">open</a> <a id="209" class="Keyword">import</a> <a id="216" href="FreeMonad.FindVars.html" class="Module">FreeMonad.FindVars</a> <a id="235" class="Keyword">using</a> <a id="241" class="Symbol">(</a><a id="242" href="FreeMonad.FindVars.html#200" class="Function">FindVars</a><a id="250" class="Symbol">)</a>
<a id="252" class="Keyword">open</a> <a id="257" class="Keyword">import</a> <a id="264" href="Finite.html" class="Module">Finite</a> <a id="271" class="Keyword">using</a> <a id="277" class="Symbol">(</a><a id="278" href="Finite.html#132" class="Function">ℰ</a><a id="279" class="Symbol">)</a>

<a id="282" class="Keyword">module</a> <a id="289" href="Hoare.HElim.html" class="Module">Hoare.HElim</a> <a id="301" class="Symbol">(</a><a id="302" href="Hoare.HElim.html#302" class="Bound">𝒯</a> <a id="304" class="Symbol">:</a> <a id="306" href="FreeMonad.PackagedTheory.html#177" class="Record">FullTheory</a> <a id="317" href="Agda.Primitive.html#764" class="Primitive">ℓzero</a><a id="322" class="Symbol">)</a>
                   <a id="343" class="Symbol">(</a><a id="344" href="Hoare.HElim.html#344" class="Bound">findVar</a> <a id="352" class="Symbol">:</a> <a id="354" href="FreeMonad.FindVars.html#200" class="Function">FindVars</a> <a id="363" class="Symbol">(</a><a id="364" href="FreeMonad.PackagedTheory.html#260" class="Field">FullTheory.𝒯</a> <a id="377" href="Hoare.HElim.html#302" class="Bound">𝒯</a><a id="378" class="Symbol">))</a>
                   <a id="400" class="Symbol">(</a><a id="401" href="Hoare.HElim.html#401" class="Bound">fin-arities</a> <a id="413" class="Symbol">:</a> <a id="415" class="Symbol">∀</a> <a id="417" href="Hoare.HElim.html#417" class="Bound">Oᵢ</a> <a id="420" class="Symbol">→</a> <a id="422" href="Finite.html#132" class="Function">ℰ</a> <a id="424" class="Symbol">(</a><a id="425" href="Signatures.html#422" class="Field">Signature.Arity</a> <a id="441" class="Symbol">(</a><a id="442" href="FreeMonad.PackagedTheory.html#242" class="Field">FullTheory.𝔽</a> <a id="455" href="Hoare.HElim.html#302" class="Bound">𝒯</a><a id="456" class="Symbol">)</a> <a id="458" href="Hoare.HElim.html#417" class="Bound">Oᵢ</a><a id="460" class="Symbol">))</a> <a id="463" class="Keyword">where</a>

<a id="470" class="Keyword">open</a> <a id="475" class="Keyword">import</a> <a id="482" href="Truth.html" class="Module">Truth</a> <a id="488" class="Keyword">using</a> <a id="494" class="Symbol">(</a><a id="495" href="Truth.html#1107" class="Field">ProofOf</a> <a id="503" class="Symbol">;</a> <a id="505" href="Truth.html#4459" class="Function Operator">_|→|_</a> <a id="511" class="Symbol">;</a> <a id="513" href="Truth.html#5201" class="Function">|→|-idˡ</a><a id="520" class="Symbol">;</a> <a id="522" href="Truth.html#1174" class="Function">True</a><a id="526" class="Symbol">;</a> <a id="528" href="Truth.html#1037" class="Record">Ω</a><a id="529" class="Symbol">)</a>
<a id="531" class="Keyword">open</a> <a id="536" class="Keyword">import</a> <a id="543" href="Hoare.Definition.html" class="Module">Hoare.Definition</a> <a id="560" href="Hoare.HElim.html#302" class="Bound">𝒯</a>
<a id="562" class="Keyword">open</a> <a id="567" class="Keyword">import</a> <a id="574" href="FreeMonad.HElim.html" class="Module">FreeMonad.HElim</a> <a id="590" href="Hoare.HElim.html#302" class="Bound">𝒯</a> <a id="592" href="Hoare.HElim.html#344" class="Bound">findVar</a> <a id="600" href="Hoare.HElim.html#401" class="Bound">fin-arities</a>
<a id="612" class="Keyword">open</a> <a id="617" class="Keyword">import</a> <a id="624" href="FreeMonad.Quotiented.html" class="Module">FreeMonad.Quotiented</a> <a id="645" href="Hoare.HElim.html#302" class="Bound">𝒯</a>

<a id="648" class="Keyword">module</a> <a id="655" href="Hoare.HElim.html#655" class="Module">_</a> <a id="657" class="Symbol">{</a><a id="658" href="Hoare.HElim.html#658" class="Bound">p</a> <a id="660" class="Symbol">:</a> <a id="662" href="Agda.Primitive.html#597" class="Postulate">Level</a><a id="667" class="Symbol">}</a> <a id="669" class="Keyword">where</a>
  <a id="677" class="Comment">-- open import Truth.MonoLevel p</a>
  <a id="712" class="Comment">-- open DisplayGlobal {p}</a>

  <a id="741" class="Comment">-- This is just 𝒢-elim repackaged for Hoare logic</a>
  <a id="793" class="Keyword">module</a> <a id="800" href="Hoare.HElim.html#800" class="Module">_</a> <a id="802" class="Symbol">{</a><a id="803" href="Hoare.HElim.html#803" class="Bound">A</a> <a id="805" href="Hoare.HElim.html#805" class="Bound">B</a> <a id="807" class="Symbol">:</a> <a id="809" href="Agda.Primitive.html#326" class="Primitive">Type</a><a id="813" class="Symbol">}</a>
           <a id="826" class="Symbol">(</a><a id="827" href="Hoare.HElim.html#827" class="Bound">ϕ</a> <a id="829" class="Symbol">:</a> <a id="831" href="Hoare.HElim.html#803" class="Bound">A</a> <a id="833" class="Symbol">→</a> <a id="835" href="Truth.html#1037" class="Record">Ω</a> <a id="837" href="Hoare.HElim.html#658" class="Bound">p</a><a id="838" class="Symbol">)</a>
           <a id="851" class="Symbol">(</a><a id="852" href="Hoare.HElim.html#852" class="Bound">f</a> <a id="854" href="Hoare.HElim.html#854" class="Bound">g</a> <a id="856" class="Symbol">:</a> <a id="858" href="Hoare.HElim.html#803" class="Bound">A</a> <a id="860" class="Symbol">→</a> <a id="862" href="FreeMonad.Relation.html#1961" class="Function">Term</a> <a id="867" href="Hoare.HElim.html#805" class="Bound">B</a><a id="868" class="Symbol">)</a>
           <a id="881" class="Symbol">(</a><a id="882" href="Hoare.HElim.html#882" class="Bound">k</a> <a id="884" class="Symbol">:</a> <a id="886" class="Symbol">(</a><a id="887" href="Hoare.HElim.html#887" class="Bound">x</a> <a id="889" class="Symbol">:</a> <a id="891" href="Hoare.HElim.html#803" class="Bound">A</a><a id="892" class="Symbol">)</a> <a id="894" class="Symbol">→</a> <a id="896" href="Truth.html#1107" class="Field">ProofOf</a> <a id="904" class="Symbol">(</a><a id="905" href="Hoare.HElim.html#827" class="Bound">ϕ</a> <a id="907" href="Hoare.HElim.html#887" class="Bound">x</a><a id="908" class="Symbol">)</a> <a id="910" class="Symbol">→</a> <a id="912" href="Hoare.HElim.html#852" class="Bound">f</a> <a id="914" href="Hoare.HElim.html#887" class="Bound">x</a> <a id="916" href="Agda.Builtin.Cubical.Path.html#388" class="Function Operator">≡</a> <a id="918" href="Hoare.HElim.html#854" class="Bound">g</a> <a id="920" href="Hoare.HElim.html#887" class="Bound">x</a><a id="921" class="Symbol">)</a>
           <a id="934" class="Symbol">(</a><a id="935" href="Hoare.HElim.html#935" class="Bound">t</a> <a id="937" class="Symbol">:</a> <a id="939" href="FreeMonad.Relation.html#1961" class="Function">Term</a> <a id="944" href="Hoare.HElim.html#803" class="Bound">A</a><a id="945" class="Symbol">)</a> <a id="947" class="Keyword">where</a>
<a id="953" class="Markup">\end{code}</a><a id="963" class="Background">

%&lt;*h-elim&gt;
</a><a id="976" class="Markup">\begin{code}</a>
    <a id="993" href="Hoare.HElim.html#993" class="Function">H-elim</a>  <a id="1001" class="Symbol">:</a> <a id="1003" class="Symbol">(</a><a id="1004" href="Hoare.Definition.html#4405" class="Function">⟅⟆</a> <a id="1007" href="Hoare.HElim.html#1007" class="Bound">x</a> <a id="1009" href="Hoare.Definition.html#4405" class="Function">←</a> <a id="1011" href="Hoare.HElim.html#935" class="Bound">t</a> <a id="1013" href="Hoare.Definition.html#4405" class="Function">⟅</a> <a id="1015" href="FreeMonad.Quotiented.html#5498" class="Function">return</a> <a id="1022" class="Symbol">(</a><a id="1023" href="Hoare.HElim.html#827" class="Bound">ϕ</a> <a id="1025" href="Hoare.HElim.html#1007" class="Bound">x</a><a id="1026" class="Symbol">)</a> <a id="1028" href="Hoare.Definition.html#4405" class="Function">⟆</a><a id="1029" class="Symbol">)</a> <a id="1031" class="Symbol">→</a> <a id="1033" class="Symbol">(</a><a id="1034" href="Hoare.HElim.html#935" class="Bound">t</a> <a id="1036" href="FreeMonad.Quotiented.html#5654" class="Function Operator">&gt;&gt;=</a> <a id="1040" href="Hoare.HElim.html#852" class="Bound">f</a><a id="1041" class="Symbol">)</a> <a id="1043" href="Agda.Builtin.Cubical.Path.html#388" class="Function Operator">≡</a> <a id="1045" class="Symbol">(</a><a id="1046" href="Hoare.HElim.html#935" class="Bound">t</a> <a id="1048" href="FreeMonad.Quotiented.html#5654" class="Function Operator">&gt;&gt;=</a> <a id="1052" href="Hoare.HElim.html#854" class="Bound">g</a><a id="1053" class="Symbol">)</a>
<a id="1055" class="Markup">\end{code}</a><a id="1065" class="Background">
%&lt;/h-elim&gt;

</a><a id="1078" class="Markup">\begin{code}</a>
    <a id="1095" href="Hoare.HElim.html#993" class="Function">H-elim</a> <a id="1102" href="Hoare.HElim.html#1102" class="Bound">h</a> <a id="1104" class="Symbol">=</a> <a id="1106" href="FreeMonad.HElim.html#11942" class="Function">𝒢-elim</a> <a id="1113" href="Hoare.HElim.html#827" class="Bound">ϕ</a> <a id="1115" href="Hoare.HElim.html#852" class="Bound">f</a> <a id="1117" href="Hoare.HElim.html#854" class="Bound">g</a> <a id="1119" href="Hoare.HElim.html#882" class="Bound">k</a> <a id="1121" href="Hoare.HElim.html#935" class="Bound">t</a> <a id="1123" href="Function.html#654" class="Function Operator">$</a>
      <a id="1131" href="FreeMonad.HElim.html#7707" class="Function">ϕ?</a> <a id="1134" href="Hoare.HElim.html#827" class="Bound">ϕ</a> <a id="1136" href="FreeMonad.Quotiented.html#6023" class="Function Operator">&lt;$&gt;</a> <a id="1140" href="Hoare.HElim.html#935" class="Bound">t</a> <a id="1142" href="Path.Reasoning.html#574" class="Function Operator">≡⟨⟩</a>
      <a id="1152" class="Symbol">(</a><a id="1153" class="Keyword">do</a> <a id="1156" href="Hoare.HElim.html#1156" class="Bound">x</a> <a id="1158" href="FreeMonad.Quotiented.html#5654" class="Function Operator">←</a> <a id="1160" href="Hoare.HElim.html#935" class="Bound">t</a><a id="1161" class="Symbol">;</a> <a id="1163" href="FreeMonad.Quotiented.html#5498" class="Function">return</a> <a id="1170" class="Symbol">(</a><a id="1171" href="Hoare.HElim.html#1156" class="Bound">x</a> <a id="1173" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1175" href="Hoare.HElim.html#827" class="Bound">ϕ</a> <a id="1177" href="Hoare.HElim.html#1156" class="Bound">x</a><a id="1178" class="Symbol">))</a> <a id="1181" href="Path.Reasoning.html#298" class="Function">≡⟨</a> <a id="1184" href="Hoare.HElim.html#1184" class="Bound">x</a> <a id="1186" href="FreeMonad.Quotiented.html#9703" class="Function">⇐</a> <a id="1188" href="Hoare.HElim.html#935" class="Bound">t</a> <a id="1190" href="FreeMonad.Quotiented.html#9703" class="Function">;/</a> <a id="1193" href="Cubical.Foundations.Id.html#772" class="Function">cong</a> <a id="1198" class="Symbol">(</a><a id="1199" href="FreeMonad.Quotiented.html#5498" class="Function">return</a> <a id="1206" href="Function.html#292" class="Function Operator">∘</a> <a id="1208" class="Symbol">(</a><a id="1209" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,_</a> <a id="1213" href="Hoare.HElim.html#1184" class="Bound">x</a><a id="1214" class="Symbol">))</a> <a id="1217" class="Symbol">(</a><a id="1218" href="Function.html#586" class="Function">const</a> <a id="1224" href="Truth.html#1742" class="Function Operator">Truth.iff</a> <a id="1234" class="Symbol">λ</a> <a id="1236" href="Hoare.HElim.html#1236" class="Bound">f</a> <a id="1238" class="Symbol">→</a> <a id="1240" href="Hoare.HElim.html#1236" class="Bound">f</a> <a id="1242" class="Symbol">_)</a> <a id="1245" href="Path.Reasoning.html#298" class="Function">⟩</a>
      <a id="1253" class="Symbol">(</a><a id="1254" class="Keyword">do</a> <a id="1257" href="Hoare.HElim.html#1257" class="Bound">x</a> <a id="1259" href="FreeMonad.Quotiented.html#5654" class="Function Operator">←</a> <a id="1261" href="Hoare.HElim.html#935" class="Bound">t</a><a id="1262" class="Symbol">;</a> <a id="1264" href="FreeMonad.Quotiented.html#5498" class="Function">return</a> <a id="1271" class="Symbol">(</a><a id="1272" href="Hoare.HElim.html#1257" class="Bound">x</a> <a id="1274" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1276" href="Truth.html#1174" class="Function">True</a> <a id="1281" href="Truth.html#4459" class="Function Operator">|→|</a> <a id="1285" href="Hoare.HElim.html#827" class="Bound">ϕ</a> <a id="1287" href="Hoare.HElim.html#1257" class="Bound">x</a><a id="1288" class="Symbol">))</a> <a id="1291" href="Path.Reasoning.html#298" class="Function">≡⟨</a> <a id="1294" href="Hoare.Definition.html#3962" class="Function">on-pair</a> <a id="1302" href="Hoare.HElim.html#1102" class="Bound">h</a> <a id="1304" href="Path.Reasoning.html#298" class="Function">⟩</a>
      <a id="1312" class="Symbol">(</a><a id="1313" class="Keyword">do</a> <a id="1316" href="Hoare.HElim.html#1316" class="Bound">x</a> <a id="1318" href="FreeMonad.Quotiented.html#5654" class="Function Operator">←</a> <a id="1320" href="Hoare.HElim.html#935" class="Bound">t</a><a id="1321" class="Symbol">;</a> <a id="1323" href="FreeMonad.Quotiented.html#5498" class="Function">return</a> <a id="1330" class="Symbol">(</a><a id="1331" href="Hoare.HElim.html#1316" class="Bound">x</a> <a id="1333" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1335" href="Truth.html#1174" class="Function">True</a><a id="1339" class="Symbol">))</a> <a id="1342" href="Path.Reasoning.html#574" class="Function Operator">≡⟨⟩</a>
      <a id="1352" href="FreeMonad.HElim.html#7744" class="Function">ϕT</a> <a id="1355" href="Hoare.HElim.html#827" class="Bound">ϕ</a> <a id="1357" href="FreeMonad.Quotiented.html#6023" class="Function Operator">&lt;$&gt;</a> <a id="1361" href="Hoare.HElim.html#935" class="Bound">t</a> <a id="1363" href="Path.Reasoning.html#642" class="Function Operator">∎</a>
<a id="1365" class="Markup">\end{code}</a><a id="1375" class="Background">
</a></pre></body></html>