<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="forest.xsl"?>
<tree expanded="true" show-heading="true" show-metadata="true" toc="false" root="false"><frontmatter> <anchor>700</anchor>   <addr>zyang-000R</addr>  <route>zyang-000R.xml</route> <date><year>2023</year> <month>10</month> <day>6</day></date>  <title>Dependent functions of spans</title> </frontmatter> <mainmatter><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>1</crumb></trail> <anchor>701</anchor>   <addr>zyang-000S</addr>  <route>zyang-000S.xml</route> <date><year>2023</year> <month>10</month> <day>6</day></date>  <title>Exponentials of spans</title> </frontmatter> <mainmatter><p>Given two spans <tex>A, B  \in   \mathbf{Sp}</tex>, the exponential object <tex>A  \Rightarrow  B</tex> is the span
<tex display="block">(A_L  \Rightarrow _ \mathbf{Set}  B_L) \leftarrow \mathbf{hom} _{ \mathbf{Sp} } { \left ( A , B \right )} \rightarrow (A_R  \Rightarrow _ \mathbf{Set}  B_R)</tex>where left leg is <tex>(h : A  \to  B)  \mapsto  (h_L : A_L  \to  B_L)</tex>, and the right leg is symmetric. The evaluation map <tex>\mathit{ev}  : (A  \Rightarrow  B)  \times  A  \to  B</tex> of the exponential is
<center><img src="resources/5265c37c7101f522f5865ecbcee8d5bc-web.svg"/></center>Given any <tex>f :  \Gamma   \times  A  \to  B</tex>, the 'abstraction morphism' <tex>\lambda  f :  \Gamma   \to  (A  \Rightarrow  B)</tex> is 
<center><img src="resources/4c082ea1b49034413627c4c1dab0bf99-web.svg"/></center></p></mainmatter> </tree></mainmatter> <backmatter><contributions/> <context><tree expanded="false" show-heading="true" show-metadata="true" toc="false" root="false"><frontmatter> <anchor>702</anchor>   <addr>zyang-000J</addr>  <route>zyang-000J.xml</route> <date><year>2023</year> <month>10</month> <day>4</day></date>  <title>Type formers of MLTT for spans</title> </frontmatter> <mainmatter><p>The usual type formers of MLTT on sets, such as dependent sum and dependent function types, can be lifted to spans as well.</p><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>2</crumb></trail> <anchor>703</anchor>   <addr>zyang-000P</addr>  <route>zyang-000P.xml</route> <date><year>2023</year> <month>10</month> <day>5</day></date>  <title>Base types of spans</title> </frontmatter> <mainmatter><p>The usual base types — the empty type <tex>\mathbf{0}</tex>, unit type <tex>\mathbf{1}</tex>, and natural number type <tex>\mathbf{N}</tex> — can be lifted from sets to spans in a pointwise manner. Let's use <tex>\mathbf{N}</tex> for example: in the empty context <tex>\mathbf{1} _{ }   \in   \mathbf{Sp}</tex>, there is a type <tex>\mathbf{N}  :  \mathbf{1} _{ }   \to   \dot{\mathcal{U}}   \in   \mathbf{Ty} ( \mathbf{1} _{ } )</tex> given by 
<tex display="block">\begin{align*} \mathbf{N} _L(*) &amp;=  \mathbb{N}  &amp;&amp; \in   \mathcal{U}  =  \dot{\mathcal{U}} _L  \\ \mathbf{N} _C(*) &amp;=  \left ( \mathbb{N}   \xleftarrow{1 _{ \mathbb{N} }}   \mathbb{N}   \xrightarrow{1 _{ \mathbb{N} }}   \mathbb{N} \right ) &amp;&amp; \in   \mathcal{S} _ \mathcal{U}  =  \dot{\mathcal{U}} _C  \\ \mathbf{N} _R(*) &amp;=  \mathbb{N}  &amp;&amp; \in   \mathcal{U}  =  \dot{\mathcal{U}} _R
 \end{align*}</tex>For every context <tex>\Gamma   \in   \mathbf{Sp}</tex>, there is also a type <tex>!^*  \mathbf{N}   \in   \mathbf{Ty} ( \Gamma )</tex> by weakening along the trivial substitution <tex>! :  \Gamma   \to   \mathbf{1} _{ }</tex>. For brevity, we will usually omit <tex>!^*</tex> below.
</p><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>2</crumb> <crumb>1</crumb></trail> <anchor>704</anchor>  <taxon>Intuition</taxon> <addr>zyang-000Q</addr>  <route>zyang-000Q.xml</route> <date><year>2023</year> <month>10</month> <day>6</day></date>  <title>Natural numbers in the language of spans</title> </frontmatter> <mainmatter><p>For an arbitrary span <tex>\Gamma   \in   \mathbf{Sp}</tex>, elements <tex>n  \in   \mathbf{Tm} ( \Gamma ;  \mathbf{N} )</tex> are right inverses of <tex>p :  \Gamma . \mathbf{N}   \to   \Gamma</tex>, which are in bijection with span morphisms from <tex>\Gamma</tex> to the constant span <tex>\mathbb{N}   \leftarrow   \mathbb{N}   \rightarrow   \mathbb{N}</tex>, which are in bijection with two functions <tex>n_L :  \Gamma _L  \to   \mathbb{N}</tex> and <tex>n_R :  \Gamma _R  \to   \mathbb{N}</tex> such that <tex>n_L(x) = n_R(y)</tex> whenever <tex>x  \in   \Gamma _L</tex> and <tex>y  \in   \Gamma _R</tex> are related (by some element of <tex>\Gamma _C</tex>).</p><p>Informally, in the language of spans an element of the natural number type <tex>\mathbf{N}</tex> (and similarly the unit <tex>\mathbf{1}</tex> and empty type <tex>\mathbf{0}</tex>) is a pair of actual natural numbers that are equal in related contexts.</p></mainmatter> </tree><p>The constructor and eliminator for the natural number type are also defined in a pointwise manner in an essentially straightforward way, except that the machinery of type dependency in CwFs brings in some complication: 
<ul><li>There are constructors <tex>z :  \mathbf{1} _{ }   \to   \mathbf{1} _{ } . \mathbf{N}   \in   \mathbf{Tm} ( \mathbf{1} _{ } ;  \mathbf{N} )</tex><tex display="block">z_X(*) =  { \left \langle   *, 0   \right \rangle }   \text{ for }  X  \in   \mathbf{S} ^{ \mathsf{o} }</tex>and <tex>s :  \mathbf{1} _{ } . \mathbf{N}   \to   \mathbf{1} _{ } . \mathbf{N} . \mathbf{N}   \in   \mathbf{Tm} ( \mathbf{1} _{ } . \mathbf{N} ;  \mathbf{N} )</tex><tex display="block">s_X(*, n) =  { \left \langle   *, n, n+1   \right \rangle }   \text{ for }  X  \in   \mathbf{S} ^{ \mathsf{o} } .</tex></li><li>There is an eliminator for every <tex>\Gamma   \in   \mathbf{Sp}</tex> and <tex>B  \in   \mathbf{Ty} ( \Gamma . \mathbf{N} )</tex>, given two terms
<tex display="block">\bar{z}   \in   \mathbf{Tm} ( \Gamma ;  { \left \langle   1 _{ \Gamma } , z   \right \rangle } ^*B) \quad \text{and} \quad \bar{s}   \in   \mathbf{Tm} ( \Gamma . \mathbf{N} .B; s'^*B),
</tex>where <tex>s' :  \Gamma . \mathbf{N} .B  \to   \Gamma . \mathbf{N}</tex> is the morphism that increments the <tex>\mathbf{N}</tex> and discards the <tex>B</tex>,
we have a term <tex>\mathit{rec}  :  \Gamma . \mathbf{N}   \to   \Gamma . \mathbf{N} .B  \in   \mathbf{Tm} ( \Gamma . \mathbf{N} ; B)</tex>:
<tex display="block">\begin{align*}    \mathit{rec} _X( \rho , n) =  \mathbb{N} \textit{-rec} \, (&amp;  { \left \langle   \rho , 0,  \pi _2 ( \bar{z} _X( \rho ))   \right \rangle } ,  \\ &amp;  \lambda   { \left \langle   \rho , m, b   \right \rangle } . \  { \left \langle   \rho , m+1,  \pi _4( \bar{s} _X( \rho , m, b))   \right \rangle } , \\  &amp; n) \end{align*}</tex>for <tex>X  \in   { \left \{ L, C, R \right \} }</tex>, where <tex>\mathbb{N} \textit{-rec}</tex> is the recursor of natural numbers on <em>sets</em>:
<tex display="block">\mathbb{N} \textit{-rec}  : S  \to  (S  \to  S)  \to   \mathbb{N}   \to  S.</tex> 
</li></ul></p></mainmatter> </tree><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>3</crumb></trail> <anchor>705</anchor>   <addr>zyang-000L</addr>  <route>zyang-000L.xml</route> <date><year>2023</year> <month>10</month> <day>4</day></date>  <title>Dependent sums of spans</title> </frontmatter> <mainmatter><p>For every set <tex>A</tex> and <tex>A</tex>-indexed family of sets <tex>B(a)</tex>, we denote the set of their dependent sum using the following notation:
<tex display="block">\sigma ( x  \in  A  . \  B(x) )   \coloneqq   { \left \{ { \left \langle   a, b   \right \rangle }   \mid  a  \in  A, b  \in  B(a) \right \} }</tex></p><p>For every span <tex>\Gamma   \in   \mathbf{Sp}</tex>, <tex>A  \in   \mathbf{Ty} ( \Gamma )</tex>, and <tex>B  \in   \mathbf{Ty} ( \Gamma .A)</tex> (i.e. <tex>A :  \Gamma   \to   \dot{\mathcal{U}}</tex> and <tex>B :  \Gamma .A  \to   \dot{\mathcal{U}}</tex>), the <em>dependent sum</em> of <tex>A</tex> and <tex>B</tex> is an element <tex>\Sigma  A B :  \Gamma   \to   \dot{\mathcal{U}}</tex> of <tex>\mathbf{Ty} ( \Gamma )</tex>:
<tex display="block">\begin{align*} \left ( \Sigma  A B \right )_L(x) &amp;=  \sigma ( a  \in  A_L(x)  . \  B_L(x, a) ) \\ \left ( \Sigma  A B \right )_R(y) &amp;=  \sigma ( a  \in  A_R(y)  . \  B_R(y, a) ) \end{align*}</tex>and <tex>( \Sigma  A B)_C(p)</tex> is the span whose middle set is
<tex display="block">M  \coloneqq   \sigma ( q  \in  (A_C(p))_C  . \   (B_C(p, q))_C  )</tex>with a right leg 
<tex display="block">\begin{align*} M &amp; \to   \left ( \Sigma  A B)_R( \Gamma _r(p) \right )  \\ { \left \langle   q, s   \right \rangle }  &amp; \mapsto   { \left \langle   A_C(p)_r(q), B_C (p, q)_r (s)   \right \rangle } \end{align*}</tex>and a symmetric left leg. The reader might want to pause to check that the definition above makes sense by the naturality of <tex>A</tex> and <tex>B</tex>.</p><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>3</crumb> <crumb>1</crumb></trail> <anchor>706</anchor>  <taxon>Proposition</taxon> <addr>zyang-000O</addr>  <route>zyang-000O.xml</route> <date><year>2023</year> <month>10</month> <day>5</day></date>  <title>Naturality of sum types</title> </frontmatter> <mainmatter><p>It is not very difficult to check that substitution commutes with <tex>\Sigma</tex>-types: let <tex>\gamma  :  \Delta   \to   \Gamma</tex> be a morphism, we have the (strict) equality
<tex display="block">\gamma ^*  \Sigma  A B =  \Sigma  ( \gamma ^* A) (( \gamma ^{+})^* B)</tex>where <tex>\gamma ^+  \coloneqq   { \left \langle   \gamma   \circ  p, v   \right \rangle }  :  \Delta .( \gamma ^* A)  \to   \Gamma .A</tex> is given by the universal property of <tex>\Gamma .A</tex>.
</p></mainmatter> </tree><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>3</crumb> <crumb>2</crumb></trail> <anchor>707</anchor>  <taxon>Proposition</taxon> <addr>zyang-000M</addr>  <route>zyang-000M.xml</route> <date><year>2023</year> <month>10</month> <day>4</day></date>  <title>Universal property of dependent sum of spans</title> </frontmatter> <mainmatter><p>It can be checked that the definition of <tex>\Sigma  A B</tex> above satisfies that for every <tex>f :  \Delta   \to   \Gamma</tex> there is a canonical bijection
<tex display="block">\mathbf{Tm} ( \Delta ; f^*( \Sigma  A B))  \cong   \sigma ( a  \in   \mathbf{Tm} ( \Delta ; f^* A)  . \    \mathbf{Tm} ( \Delta ;  { \left \langle   f, a   \right \rangle } ^* B) )</tex>where we write <tex>f^*</tex> for the action <tex>\mathbf{Ty} (f) :  \mathbf{Ty} ( \Gamma )  \to   \mathbf{Ty} ( \Delta )</tex> and <tex>{ \left \langle   f, a   \right \rangle }  :  \Delta   \to   \Gamma .A</tex> for the morphism given by the universal property of <tex>\Gamma .A</tex>.
Additionally, when we regard both sides of isomorphism above as functors <tex>{ \mathbf{Sp} } _{ / \Gamma }   \to   \mathbf{Set}</tex>, it is a natural isomorphism.</p><p>This natural isomorphism underlies the term formers and eliminators of sum types. Letting <tex>f</tex> in the isomorphism be the projection <tex>p :  \Gamma . \Sigma  A B  \to   \Gamma</tex>, there is always a term <tex>v :  \mathbf{Tm} ( \Gamma . \Sigma  A B; p^*( \Sigma  A B))</tex> which uses the variable of type <tex>\Sigma  A B</tex> in the context <tex>\Gamma . \Sigma  A B</tex>. This term under the isomorphism gives rise to elements
<tex display="block">\begin{align*} \pi _1 &amp; \in   \mathbf{Tm} ( \Gamma . \Sigma  A B, p^* A)  \\ \pi _2 &amp; \in   \mathbf{Tm} ( \Gamma . \Sigma  A B,  { \left \langle   p,  \pi _1   \right \rangle } ^* B) \end{align*}</tex>that are the first projection and second projection of dependent sums.
From the other direction, letting <tex>f</tex> be the identity <tex>\Gamma   \to   \Gamma</tex>, this isomorphism implies that an element <tex>a  \in   \mathbf{Tm} ( \Gamma ; A)</tex> and an element of <tex>\mathbf{Tm} ( \Gamma ;  { \left \langle   1 _{ \Gamma } , a   \right \rangle } ^* B)</tex> can be <em>paired</em> to form an element of <tex>\Sigma  A B</tex> in the context <tex>\Gamma</tex>.
Finally, the naturality of this isomorphism guarantees that substitution commutes with the projections and pairing.
</p></mainmatter> </tree></mainmatter> </tree><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>4</crumb></trail> <anchor>708</anchor>   <addr>zyang-000R</addr>  <route>zyang-000R.xml</route> <date><year>2023</year> <month>10</month> <day>6</day></date>  <title>Dependent functions of spans</title> </frontmatter> <mainmatter><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>4</crumb> <crumb>1</crumb></trail> <anchor>709</anchor>   <addr>zyang-000S</addr>  <route>zyang-000S.xml</route> <date><year>2023</year> <month>10</month> <day>6</day></date>  <title>Exponentials of spans</title> </frontmatter> <mainmatter><p>Given two spans <tex>A, B  \in   \mathbf{Sp}</tex>, the exponential object <tex>A  \Rightarrow  B</tex> is the span
<tex display="block">(A_L  \Rightarrow _ \mathbf{Set}  B_L) \leftarrow \mathbf{hom} _{ \mathbf{Sp} } { \left ( A , B \right )} \rightarrow (A_R  \Rightarrow _ \mathbf{Set}  B_R)</tex>where left leg is <tex>(h : A  \to  B)  \mapsto  (h_L : A_L  \to  B_L)</tex>, and the right leg is symmetric. The evaluation map <tex>\mathit{ev}  : (A  \Rightarrow  B)  \times  A  \to  B</tex> of the exponential is
<center><img src="resources/5265c37c7101f522f5865ecbcee8d5bc-web.svg"/></center>Given any <tex>f :  \Gamma   \times  A  \to  B</tex>, the 'abstraction morphism' <tex>\lambda  f :  \Gamma   \to  (A  \Rightarrow  B)</tex> is 
<center><img src="resources/4c082ea1b49034413627c4c1dab0bf99-web.svg"/></center></p></mainmatter> </tree></mainmatter> </tree></mainmatter> </tree></context> <related/> <backlinks/> <references/></backmatter></tree>