<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="forest.xsl"?>
<tree expanded="true" show-heading="true" show-metadata="true" toc="false" root="false"><frontmatter> <anchor>511</anchor>   <addr>zyang-000F</addr>  <route>zyang-000F.xml</route> <date><year>2023</year> <month>9</month> <day>27</day></date>  <title>The CwF structure of spans</title> </frontmatter> <mainmatter><p>We can complete the definition of the CwF structure on the category <tex>\mathbf{Sp}</tex> of spans as follows :
<ul>  <li>The category of <b>contexts</b> and substitutions is <tex>\mathbf{Sp}</tex>.</li> 
  <li>The set of <b>types</b> over a context <tex>\Gamma   \in   \mathbf{Sp}</tex> is
<tex display="block">\mathbf{Ty} ( \Gamma )  \coloneqq   \mathbf{hom} _{ } ( \Gamma , \dot{\mathcal{U}} ) .</tex>The action of a substitution <tex>\gamma  :  \Delta   \to   \Gamma</tex> on <tex>\mathbf{Ty} ( \Gamma )</tex> is <tex display="block">( {-}   \circ   \gamma ) :  \mathbf{Ty} ( \Gamma )  \to   \mathbf{Ty} ( \Delta ).</tex></li>  <li>The set of <b>terms</b> over a type <tex>A :  \Gamma   \to   \dot{\mathcal{U}}</tex> is 
<tex display="block">\mathbf{Tm} ( \Gamma ; A)  \coloneqq   { \left \{ e :  \Gamma   \to  A^*( \dot{\mathcal{U}} ^ \bullet )  \mid  A^*( \pi )  \circ  e =  1 _{ } \right \} } ,</tex>where <tex>A^*</tex> is the chosen pullback of <tex>\pi</tex> in the definition of <link href="zyang-000D.xml" type="local" title="Universes of spans">universes of spans</link>:
  <center><img src="resources/6e68f758c9718b4c6eb7924363f9fc41-web.svg"/></center>The action of a substitution <tex>\gamma  :  \Delta   \to   \Gamma</tex> on <tex>\mathbf{Tm} ( \Gamma ; A)</tex> sends every <tex>e :  \Gamma   \to  A^*( \dot{\mathcal{U}} ^ \bullet )</tex> to the following morphism in <tex>\mathbf{Tm} ( \Delta , A  \circ   \gamma )</tex> <tex display="block">{ \left \langle   1 _{ \Delta } , k  \circ  e  \circ   \gamma   \right \rangle }  :  \Delta   \to  (A  \circ   \gamma )^*( \dot{\mathcal{U}} ^ \bullet )</tex> using the pullback property of <tex>(A  \circ   \gamma )^*( \dot{\mathcal{U}} ^ \bullet )</tex>:
<center><img src="resources/9aacb706f82b71807aaefe0192f6a8ad-web.svg"/></center></li>  <li><b>Context extension</b> for a type <tex>A :  \Gamma   \to   \dot{\mathcal{U}}</tex> is just the chosen pullback <tex>\Gamma .A  \coloneqq  A^*( \dot{\mathcal{U}} ^ \bullet )</tex>. The associated context projection is <tex display="block">p  \coloneqq  A^*( \pi ) :  \Gamma .A  \to   \Gamma ,</tex> and the variable projection is <tex display="block">v  \coloneqq   { \left \langle   1, k   \right \rangle }   \in   \mathbf{Tm} ( \Gamma .A; A  \circ  p)</tex> given by the pullback property of <tex>\Gamma .A.(A  \circ  p)</tex> as in the following diagram:
</li></ul></p><center><img src="resources/21dc8d758dc2aa4941058a6d0d698e3e-web.svg"/></center><p>The reader might have noticed that the CwF structure above doesn't depend on anything specific to <tex>\mathbf{Sp}</tex> but works for any category with any morphism <tex>\pi  :  \dot{\mathcal{U}} ^ \bullet   \to   \dot{\mathcal{U}}</tex> that has chosen pullbacks along all morphisms. The property of <tex>\dot{\mathcal{U}}</tex> as a universe will be used later when defining type formers on the CwF of spans.</p></mainmatter> <backmatter><contributions/> <context><tree expanded="false" show-heading="true" show-metadata="true" toc="false" root="false"><frontmatter> <anchor>512</anchor>   <addr>zyang-0009</addr>  <route>zyang-0009.xml</route> <date><year>2023</year> <month>9</month> <day>26</day></date> <authors><author><link href="zyang.xml" type="local">Zhixuan Yang</link></author> </authors> <title>Dependent type theory in the category of spans</title> </frontmatter> <mainmatter><p>It is well known that presheaf categories are locally cartesian closed and thus are models for (extensional) <link href="https://ncatlab.org/nlab/show/Martin-Löf+dependent+type+theory" type="external"><em>Martin-Löf type theory</em></link> (MLTT). In this section, I will spell out the interpretation of MLTT in the presheaf category <tex>\mathbf{Sp}   \coloneqq   \mathbf{PSh} ( \mathbf{S} ^{ \mathsf{o} } )</tex> of spans. Instead of working with the syntactic inference rules of MLTT, we will directly work with the <em>(generalised) algebraic structures</em> that are models of MLTT. The kind of algebraic structures that we are going to use are <em>categories with families</em>.</p><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>1</crumb></trail> <anchor>513</anchor>  <taxon>Definition</taxon> <addr>zyang-000G</addr>  <route>zyang-000G.xml</route> <date><year>2023</year> <month>9</month> <day>27</day></date>  <title>Category with families</title> </frontmatter> <mainmatter><p>A <em>category with family</em> (CwF) consists of
<ul>  <li>a category <tex>\mathcal{C}</tex> with a terminal object,</li>  <li>a presheaf <tex>\mathbf{Ty}  :  \mathcal{C} ^{ \mathsf{o} }   \to   \mathbf{Set}</tex>,</li>  <li>a presheaf <tex>\mathbf{Tm}  :  ( \smallint   \mathbf{Ty} ) ^{ \mathsf{o} }   \to   \mathbf{Set}</tex> on the <link href="https://ncatlab.org/nlab/show/category+of+elements#definition" type="external">category of elements</link> of <tex>\mathbf{Tm}</tex>,</li> 
  <li>for each <tex>\Gamma   \in   \mathcal{C}</tex> and <tex>A  \in   \mathbf{Ty} ( \Gamma )</tex>, a (fully specified) representing object for the functor <tex>{ \mathcal{C} } _{ / \Gamma }   \to   \mathbf{Set}</tex> whose object mapping is
<tex display="block">( \Delta   \xrightarrow{\gamma}   \Gamma )  \mapsto   \mathbf{Tm} ( \Delta ;  \mathbf{Ty} ( \gamma )(A))</tex>and arrow mapping on <tex>\zeta  : ( \gamma ' :  \Delta '  \rightarrow   \Gamma )  \to  ( \gamma  :  \Delta   \to   \Gamma )</tex> is
<tex display="block">\mathbf{Tm} ( \zeta ) :
 \mathbf{Tm} ( \Delta ;  \mathbf{Ty} ( \gamma )(A))  \to   \mathbf{Tm} ( \Delta ';  \mathbf{Ty} ( \gamma   \circ   \zeta )(A))</tex></li></ul></p></mainmatter> </tree><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>2</crumb></trail> <anchor>514</anchor>  <taxon>Intuition</taxon> <addr>zyang-000H</addr>  <route>zyang-000H.xml</route> <date><year>2023</year> <month>9</month> <day>27</day></date>  <title>Category with families</title> </frontmatter> <mainmatter><p>The objects in the category <tex>\mathcal{C}</tex> give semantics to the <em>contexts</em> of MLTT, and the morphisms <tex>\gamma  :  \Delta   \to   \Gamma</tex> in <tex>\mathcal{C}</tex> give semantics to <em>context substitutions</em> of MLTT. Every element <tex>A</tex> of <tex>\mathbf{Ty} ( \Gamma )</tex> is a <em>type</em> in the context <tex>\Gamma</tex> that possibly depends on the variables in <tex>\Gamma</tex>. Every element <tex>e</tex> of <tex>\mathbf{Tm} ( \Gamma ; A)</tex> is a <em>term</em> of type <tex>A</tex> in the context <tex>\Gamma</tex>. The presheaf actions of <tex>\mathbf{Ty}</tex> and <tex>\mathbf{Tm}</tex> apply a substitution <tex>\gamma</tex> to types and terms in a context.</p><p>A fully specified representing object of the functor in the definition of CwFs is a morphism <tex>p :  \Gamma .A  \to   \Gamma</tex> together with a 'universal element' <tex>v  \in   \mathbf{Tm} ( \Gamma .A;  \mathbf{Ty} (p)(A))</tex>. The intuition for <tex>\Gamma .A</tex> is that it is the <em>context extension</em> of <tex>\Gamma</tex> with a new variable of type <tex>A</tex>. The substitution <tex>p :  \Gamma .A  \to   \Gamma</tex> is the projection, and <tex>v</tex> is the term that is just the <em>variable</em> referring to the newly bound <tex>A</tex> in the context <tex>\Gamma .A</tex>.</p></mainmatter> </tree><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>3</crumb></trail> <anchor>515</anchor>  <taxon>Notation</taxon> <addr>zyang-000N</addr>  <route>zyang-000N.xml</route> <date><year>2023</year> <month>10</month> <day>5</day></date>  <title>Notation for CwFs</title> </frontmatter> <mainmatter><p>Let <tex>\gamma  :  \Delta   \to   \Gamma</tex> be a morphism in a CwF <tex>{ \left \langle   \mathcal{C} ,  \mathbf{Ty} ,  \mathbf{Tm}   \right \rangle }</tex>. For every type <tex>A  \in   \mathbf{Ty} ( \Gamma )</tex>, we will write <tex display="block">\gamma ^* A  \coloneqq   \mathbf{Ty} ( \gamma )(A)   \in   \mathbf{Ty} ( \Delta ) </tex> for the substitution action on the type <tex>A</tex>. Similarly, for every term <tex>e  \in   \mathbf{Tm} ( \Gamma ; A)</tex>, we will write <tex display="block">\gamma ^* e  \coloneqq   \mathbf{Tm} (f)(e)  \in   \mathbf{Tm} ( \Delta ; f^* A)</tex> for the action of a substitution on a term.</p></mainmatter> </tree><p>A CwF provides the bare bone structure for interpreting a dependent type theory without any type formers. Additional logical structures, such as <tex>\Pi</tex> types and <tex>\Sigma</tex> types, can be further introduced, but we will omit their general definitions in this post for brevity. The reader can consult <mark>add refs</mark> for their precise definitions or try to infer them from the concrete instances on spans.</p><p>The <em>initial (CwF with <tex>\Pi</tex>-types, <tex>\Sigma</tex>-types, identity types, <tex>W</tex>-types, universes)</em> is the syntactic model of MLTT. Therefore to interpret MLTT in a category <tex>\mathcal{C}</tex>, it is sufficient to define a CwF whose category of context is <tex>\mathcal{C}</tex>, which is what we are going to do for the category of spans.</p><p>First of all, we need a terminal object as the empty context. Initial and terminal objects, and more generally limits and colimits, in <tex>\mathbf{Sp}</tex> can be computed pointwise as follows.</p><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>4</crumb></trail> <anchor>516</anchor>  <taxon>Construction</taxon> <addr>zyang-000A</addr>  <route>zyang-000A.xml</route> <date><year>2023</year> <month>9</month> <day>26</day></date> <authors><author><link href="zyang.xml" type="local">Zhixuan Yang</link></author> </authors> <title>Limits and colimits of spans</title> </frontmatter> <mainmatter><p>Limits and colimits in a functor category are computed pointwise, so the limit (and similarly for colimit) of a diagram <tex>F :  \mathcal{D}   \to   \mathbf{Sp}</tex> is 
<tex display="block">( \operatorname{lim} _{ i  \in   \mathcal{D} } Fi)_X =  \operatorname{lim} _{ i  \in   \mathcal{D} } (Fi)_X  \text{ for }  X  \in   \mathbf{S}</tex>which always exists when <tex>\mathcal{D}</tex> is small, since <tex>\mathbf{Set}</tex> is small-complete.
</p><p>In particular, the terminal object <tex>\mathbf{1} _{ }</tex> in <tex>\mathbf{Sp}</tex> is the span of singleton sets <tex display="block">\mathbf{1} _{ \mathbf{Set} }   \leftarrow   \mathbf{1} _{ \mathbf{Set} }   \rightarrow   \mathbf{1} _{ \mathbf{Set} } ,</tex> and the initial object <tex>\mathbf{0} _{ }</tex> in <tex>\mathbf{Sp}</tex> is the span of empty sets 
<tex display="block">\mathbf{0} _{ \mathbf{Set} }   \leftarrow   \mathbf{0} _{ \mathbf{Set} }   \rightarrow   \mathbf{0} _{ \mathbf{Set} } .</tex></p></mainmatter> </tree><p>Category theory is simply typed — the codomain of arrows <tex>A  \to  B</tex> cannot depend on the domain, so it might be unclear how to interpret dependent type theories in a category. A useful observation is that families of sets indexed by <tex>A</tex> are equivalent to sets over <tex>A</tex>: given a family of sets <tex>(B_a)_{a  \in  A}</tex>, there is
<tex display="block"> ( \pi _1 :  { \left \{   { \left \langle   a, b   \right \rangle }   \mid  a  \in  A, b  \in  B_a \right \} }   \rightarrow  A)  \in   { \mathbf{Set} } _{ / A } ;</tex>conversely, given <tex>f : B  \to  A</tex>, we have a family of sets <tex>(f^{-1}(i))_{i  \in  A}</tex>.</p><p>Following this observation, a natural way (from the perspective of category theory) to interpret a type <tex>A</tex> depending on a context <tex>\Gamma</tex> in a category <tex>\mathcal{C}</tex> is a morphism <tex>p :  { \llbracket   A   \rrbracket }   \to   { \llbracket   \Gamma   \rrbracket }</tex> (<link href="seely-1984.xml" type="local" title="Seely 1984">Seely 1984</link>), and applying a substitution <tex>\gamma  :  \Delta   \to   \Gamma</tex> to the type <tex>A</tex> is interpreted as pulling <tex>p</tex> back along <tex>{ \llbracket   \gamma   \rrbracket }</tex>:</p><center><img src="resources/e2fde03bb14ebd383242211c0b821cf2-web.svg"/></center><p>And then type connectives are interpreted as various categorical structures in the slice category <tex>{ \mathbf{Sp} } _{ / { \llbracket   \Gamma   \rrbracket } }</tex>. For example, the product type <tex>{ \Gamma   \vdash   A  \times  B }</tex> is interpreted as the product of <tex>p :  { \llbracket   A   \rrbracket }   \to   { \llbracket   \Gamma   \rrbracket }</tex> and <tex>q :  { \llbracket   B   \rrbracket }   \to   { \llbracket   \Gamma   \rrbracket }</tex> in <tex>{ \mathbf{Sp} } _{ / { \llbracket   \Gamma   \rrbracket } }</tex> (which is the same as a pullback in <tex>\mathbf{Sp}</tex>).</p><p>However, a subtle problem that is well known now is that substitution on syntax <em>strictly</em> commutes with many other operations (which is why in the <link href="zyang-000G.xml" type="local" title="Definition">definition</link> of CwFs, <tex>\mathbf{Ty}</tex> and <tex>\mathbf{Tm}</tex> are required to be presheaves of <em>sets</em> rather than presheaves of groupoids or categories), while pullbacks in a category only commute with other operations <em>up to isomorphism</em>. For example, on syntax <tex>{ \Delta   \vdash   \gamma (A  \times  B) }</tex> is definitionally equal to <tex>{ \Delta   \vdash   \gamma (A)  \times   \gamma (B) }</tex>, but their interpretations in the category <tex>\mathbf{Sp}</tex> if we follow the recipe above are only isomorphic but not necessarily strictly equal. In fact, such coherence issues arise without any type formers: syntactic substitution is strictly associative and unital, but pullbacks are associative and unital only up to isomorphism.</p><p>Therefore, the interpretation of types above in a context <em>does not</em> work, since it doesn't validate some of the equations in the syntax model. There are multiple ways to fix this problem (<mark>add refs</mark>). In this post we will use one way that makes use of <em>universes of small spans</em> in <tex>\mathbf{Sp}</tex>.</p><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>5</crumb></trail> <anchor>517</anchor>   <addr>zyang-000D</addr>  <route>zyang-000D.xml</route> <date><year>2023</year> <month>9</month> <day>27</day></date> <authors> <contributor><link href="zyang.xml" type="local">Zhixuan Yang</link></contributor></authors> <title>Universes of spans</title> </frontmatter> <mainmatter><p>A <em>Grothendieck universe</em> <tex>\mathcal{U}</tex> of sets is basically a set of sets closed under all the usual set theoretic operations. If a set <tex>A</tex> is contained in <tex>\mathcal{U}</tex>, we say that it is <tex>\mathcal{U}</tex>-small. We can also define <em>small spans</em> and <em>small span morphisms</em> as follows.</p><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>5</crumb> <crumb>1</crumb></trail> <anchor>518</anchor>  <taxon>Definition</taxon> <addr>zyang-000E</addr>  <route>zyang-000E.xml</route> <date><year>2023</year> <month>9</month> <day>27</day></date> <authors><author><link href="zyang.xml" type="local">Zhixuan Yang</link></author> </authors> <title>Small spans and small span morphisms</title> </frontmatter> <mainmatter><p>For every <link href="https://ncatlab.org/nlab/show/Grothendieck+universe" type="external"><em>Grothendieck universe</em></link> <tex>\mathcal{U}</tex> of sets, we call a span <em><tex>\mathcal{U}</tex>-small</em> if its three constituting sets are all elements of <tex>\mathcal{U}</tex>. Moreover, a morphism of spans <tex>h : B  \to  A</tex> is called <tex>\mathcal{U}</tex>-small if for every <tex>p : x  \mathrel{A}  y</tex> the following span is <tex>\mathcal{U}</tex>-small:
<tex display="block">h_L^{-1}(x)  \xleftarrow{q  \mathrel{\mapsto}  B_l(q) }  h_C^{-1}(p)  \xrightarrow{q  \mathrel{\mapsto}  B_r(q)}  h_R^{-1}(y)</tex>where <tex>f^{-1}(x)</tex> denotes the inverse image of a function.
</p></mainmatter> </tree><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>5</crumb> <crumb>2</crumb></trail> <anchor>519</anchor>  <taxon>Intuition</taxon> <addr>zyang-000K</addr>  <route>zyang-000K.xml</route>   <title>Small span morphisms</title> </frontmatter> <mainmatter><p>A small span morphism <tex>h : B  \to  A</tex> should be understood as a <em>locally small span relative to <tex>A</tex></em>. The span <tex>B</tex> itself doesn't have to be small, but the sub-span of <tex>B</tex> sitting over every <tex>p : x  \mathrel{A}  y</tex> is small.</p></mainmatter> </tree><p>The <link href="hofmann-streicher-1997.xml" type="local" title="Hofmann-Streicher lifting"><em>Hofmann-Streicher lifting</em></link> <tex>\dot{\mathcal{U}}</tex> of a Grothendieck universe <tex>\mathcal{U}</tex> of sets to the category of spans is the following span:
<tex display="block">\dot{\mathcal{U}}   \coloneqq   \left ( \mathcal{U}   \xleftarrow{\mathsf{dom} _{ }}   \mathcal{S} _ \mathcal{U}   \xrightarrow{\mathsf{cod} _{ }}   \mathcal{U}   \right ).</tex>where <tex>\mathcal{S} _ \mathcal{U}</tex> is the set of all <tex>\mathcal{U}</tex>-small spans. (Clearly, <tex>\dot{\mathcal{U}}</tex> itself is not <tex>\mathcal{U}</tex>-small.)</p><p>There is also a lifting of
the <em>pointed universe</em> <tex>\mathcal{U} ^ \bullet   \coloneqq   { \left \{ { \left \langle   X, x   \right \rangle }   \mid  X  \in   \mathcal{U} , x  \in  A \right \} }</tex> to the category of spans, which is 
<tex display="block">\dot{\mathcal{U}} ^ \bullet   \coloneqq   \left ( \mathcal{U} ^ \bullet   \leftarrow   { \left \{ { \left \langle   A, p   \right \rangle }   \mid  A  \in   \mathcal{S} _ \mathcal{U} , p  \in  A_C \right \} }   \rightarrow   \mathcal{U} ^ \bullet   \right )</tex>where the two legs of the span are respectively
<tex display="block">{ { \left \langle   A,p   \right \rangle }   \mapsto   { \left \langle   \mathsf{dom} _{ } A, A_l(p)   \right \rangle } }  \quad \text{and} \quad  { { \left \langle   A,p   \right \rangle }   \mapsto   { \left \langle   \mathsf{cod} _{ } A, A_r(p)   \right \rangle } }.</tex>There is an evident morphism <tex>\pi  :  \dot{\mathcal{U}} ^ \bullet   \to   \dot{\mathcal{U}}</tex> of spans that projects out the first components.</p><p>The universal property of Hofmann-Streicher lifting <tex>\mathcal{U}</tex> is that it <em>weakly classifies</em> <tex>\mathcal{U}</tex>-small morphisms:</p> 
<ol><li><p>For every <tex>\mathcal{U}</tex>-small morphism <tex>h : A  \to   \Gamma</tex> of spans, there exists a (not necessarily unique) pullback square:</p><center><img src="resources/8fe6324415853484589ec002fcc45028-web.svg"/></center><p>In particular, we can let <tex>\bar{h}</tex> be the following span morphism:
<tex display="block">\begin{align*} \bar{h} _L(x) &amp;= h^{-1}_L(x)  \in   \mathcal{U} \\  
 \bar{h} _C(p) &amp;=  \left ( h_L^{-1}( \Gamma _l(p))  \leftarrow  h_C^{-1}(p)  \rightarrow  h_R^{-1}( \Gamma _r(p))   \right )  \in   \mathcal{S} _ \mathcal{U}   \\  
 \bar{h} _R(y) &amp;= h^{-1}_R(y)  \in   \mathcal{U} \end{align*}</tex></p>where the two legs of <tex>\bar{h} _C(p)</tex> are the restriction of <tex>A_l</tex> and <tex>A_r</tex> respectively.
The definition of the top arrow <tex>A  \to   \dot{\mathcal{U}} ^ \bullet</tex> in the diagram above can be worked out from <tex>\bar{h}</tex>.
</li><li><p>And conversely, every such pullback square satisfies that <tex>h</tex> is <tex>\mathcal{U}</tex>-small. To see this, we can make a specific choice of pulling back <tex>\pi</tex> along any morphism <tex>k :  \Gamma   \to   \dot{\mathcal{U}}</tex> as follows:</p><p>We define <tex>k^*( \dot{\mathcal{U}} ^ \bullet )</tex> to be the span
<tex display="block">\begin{gather*} { \left \{ { \left \langle   x, x'   \right \rangle }   \mid  x  \in   \Gamma _L, x'  \in  k_L(x) \right \} }   \\ \uparrow   \\ { \left \{ { \left \langle   p, p'   \right \rangle }   \mid  p  \in   \Gamma _C, p'  \in  (k_C(p))_C  \right \} }   \\ \downarrow \\ { \left \{ { \left \langle   y, y'   \right \rangle }   \mid  y  \in   \Gamma _R, y'  \in  k_R(y) \right \} } \end{gather*}</tex>where the left leg is <tex>{ \left \langle   p, p'   \right \rangle }   \mapsto   { \left \langle   \Gamma _l(p), (k_C(p))_l(p')   \right \rangle }</tex> and the right leg is similar. This definition makes sense because the naturality of <tex>k</tex> ensures that <tex>k_L(x)</tex> and <tex>(k_C(p))_L</tex> are the same set for every <tex>p : x  \mathrel{\Gamma}  y</tex>. We define the map <tex>k^*( \pi ) : k^*( \dot{\mathcal{U}} ^ \bullet )  \to   \Gamma</tex> to be the evident map that projects out the first component. It can be quickly checked that <tex>k^*( \pi )</tex> is a pullback of <tex>\pi</tex> along <tex>k</tex> and it is <tex>\mathcal{U}</tex>-small:</p><center><img src="resources/03e337d97fde38c18c1b6234f990db95-web.svg"/></center></li></ol></mainmatter> </tree><p>Assuming that there is a Grothendieck universe <tex>\mathcal{U}</tex>, we can fix the problem with coherence of substitution by interpreting types <tex>A</tex> in a context <tex>\Gamma</tex> as morphisms <tex>{ \llbracket   A   \rrbracket }  :  { \llbracket   \Gamma   \rrbracket }   \to   \dot{\mathcal{U}}</tex>, and then semantic substitution becomes <em>precomposition</em>: given a context substitution <tex>\gamma  :  \Delta   \to   \Gamma</tex>, its action <tex>{ \Delta   \vdash   \gamma (A) }</tex> on a type <tex>{ \Gamma   \vdash   A }</tex> is interpreted as simply
<tex display="block">{ \llbracket   A   \rrbracket }   \circ   { \llbracket   \gamma   \rrbracket }  :  { \llbracket   \Delta   \rrbracket }   \to   \dot{\mathcal{U}} .</tex>This immediately solves the coherence issue of associativity and unitality of substitution as morphism composition is associative and unital. If we can further make sure that our type operations on <tex>\mathbf{hom} _{ } ( { \llbracket   \Gamma   \rrbracket } , \dot{\mathcal{U}} )</tex> also commute with precomposition then the coherence issue with substitution is fixed.</p><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>6</crumb></trail> <anchor>520</anchor>   <addr>zyang-000F</addr>  <route>zyang-000F.xml</route> <date><year>2023</year> <month>9</month> <day>27</day></date>  <title>The CwF structure of spans</title> </frontmatter> <mainmatter><p>We can complete the definition of the CwF structure on the category <tex>\mathbf{Sp}</tex> of spans as follows :
<ul>  <li>The category of <b>contexts</b> and substitutions is <tex>\mathbf{Sp}</tex>.</li> 
  <li>The set of <b>types</b> over a context <tex>\Gamma   \in   \mathbf{Sp}</tex> is
<tex display="block">\mathbf{Ty} ( \Gamma )  \coloneqq   \mathbf{hom} _{ } ( \Gamma , \dot{\mathcal{U}} ) .</tex>The action of a substitution <tex>\gamma  :  \Delta   \to   \Gamma</tex> on <tex>\mathbf{Ty} ( \Gamma )</tex> is <tex display="block">( {-}   \circ   \gamma ) :  \mathbf{Ty} ( \Gamma )  \to   \mathbf{Ty} ( \Delta ).</tex></li>  <li>The set of <b>terms</b> over a type <tex>A :  \Gamma   \to   \dot{\mathcal{U}}</tex> is 
<tex display="block">\mathbf{Tm} ( \Gamma ; A)  \coloneqq   { \left \{ e :  \Gamma   \to  A^*( \dot{\mathcal{U}} ^ \bullet )  \mid  A^*( \pi )  \circ  e =  1 _{ } \right \} } ,</tex>where <tex>A^*</tex> is the chosen pullback of <tex>\pi</tex> in the definition of <link href="zyang-000D.xml" type="local" title="Universes of spans">universes of spans</link>:
  <center><img src="resources/6e68f758c9718b4c6eb7924363f9fc41-web.svg"/></center>The action of a substitution <tex>\gamma  :  \Delta   \to   \Gamma</tex> on <tex>\mathbf{Tm} ( \Gamma ; A)</tex> sends every <tex>e :  \Gamma   \to  A^*( \dot{\mathcal{U}} ^ \bullet )</tex> to the following morphism in <tex>\mathbf{Tm} ( \Delta , A  \circ   \gamma )</tex> <tex display="block">{ \left \langle   1 _{ \Delta } , k  \circ  e  \circ   \gamma   \right \rangle }  :  \Delta   \to  (A  \circ   \gamma )^*( \dot{\mathcal{U}} ^ \bullet )</tex> using the pullback property of <tex>(A  \circ   \gamma )^*( \dot{\mathcal{U}} ^ \bullet )</tex>:
<center><img src="resources/9aacb706f82b71807aaefe0192f6a8ad-web.svg"/></center></li>  <li><b>Context extension</b> for a type <tex>A :  \Gamma   \to   \dot{\mathcal{U}}</tex> is just the chosen pullback <tex>\Gamma .A  \coloneqq  A^*( \dot{\mathcal{U}} ^ \bullet )</tex>. The associated context projection is <tex display="block">p  \coloneqq  A^*( \pi ) :  \Gamma .A  \to   \Gamma ,</tex> and the variable projection is <tex display="block">v  \coloneqq   { \left \langle   1, k   \right \rangle }   \in   \mathbf{Tm} ( \Gamma .A; A  \circ  p)</tex> given by the pullback property of <tex>\Gamma .A.(A  \circ  p)</tex> as in the following diagram:
</li></ul></p><center><img src="resources/21dc8d758dc2aa4941058a6d0d698e3e-web.svg"/></center><p>The reader might have noticed that the CwF structure above doesn't depend on anything specific to <tex>\mathbf{Sp}</tex> but works for any category with any morphism <tex>\pi  :  \dot{\mathcal{U}} ^ \bullet   \to   \dot{\mathcal{U}}</tex> that has chosen pullbacks along all morphisms. The property of <tex>\dot{\mathcal{U}}</tex> as a universe will be used later when defining type formers on the CwF of spans.</p></mainmatter> </tree><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>7</crumb></trail> <anchor>521</anchor>   <addr>zyang-000J</addr>  <route>zyang-000J.xml</route> <date><year>2023</year> <month>10</month> <day>4</day></date>  <title>Type formers of MLTT for spans</title> </frontmatter> <mainmatter><p>The usual type formers of MLTT on sets, such as dependent sum and dependent function types, can be lifted to spans as well.</p><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>7</crumb> <crumb>1</crumb></trail> <anchor>522</anchor>   <addr>zyang-000P</addr>  <route>zyang-000P.xml</route> <date><year>2023</year> <month>10</month> <day>5</day></date>  <title>Base types of spans</title> </frontmatter> <mainmatter><p>The usual base types — the empty type <tex>\mathbf{0}</tex>, unit type <tex>\mathbf{1}</tex>, and natural number type <tex>\mathbf{N}</tex> — can be lifted from sets to spans in a pointwise manner. Let's use <tex>\mathbf{N}</tex> for example: in the empty context <tex>\mathbf{1} _{ }   \in   \mathbf{Sp}</tex>, there is a type <tex>\mathbf{N}  :  \mathbf{1} _{ }   \to   \dot{\mathcal{U}}   \in   \mathbf{Ty} ( \mathbf{1} _{ } )</tex> given by 
<tex display="block">\begin{align*} \mathbf{N} _L(*) &amp;=  \mathbb{N}  &amp;&amp; \in   \mathcal{U}  =  \dot{\mathcal{U}} _L  \\ \mathbf{N} _C(*) &amp;=  \left ( \mathbb{N}   \xleftarrow{1 _{ \mathbb{N} }}   \mathbb{N}   \xrightarrow{1 _{ \mathbb{N} }}   \mathbb{N} \right ) &amp;&amp; \in   \mathcal{S} _ \mathcal{U}  =  \dot{\mathcal{U}} _C  \\ \mathbf{N} _R(*) &amp;=  \mathbb{N}  &amp;&amp; \in   \mathcal{U}  =  \dot{\mathcal{U}} _R
 \end{align*}</tex>For every context <tex>\Gamma   \in   \mathbf{Sp}</tex>, there is also a type <tex>!^*  \mathbf{N}   \in   \mathbf{Ty} ( \Gamma )</tex> by weakening along the trivial substitution <tex>! :  \Gamma   \to   \mathbf{1} _{ }</tex>. For brevity, we will usually omit <tex>!^*</tex> below.
</p><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>7</crumb> <crumb>1</crumb> <crumb>1</crumb></trail> <anchor>523</anchor>  <taxon>Intuition</taxon> <addr>zyang-000Q</addr>  <route>zyang-000Q.xml</route> <date><year>2023</year> <month>10</month> <day>6</day></date>  <title>Natural numbers in the language of spans</title> </frontmatter> <mainmatter><p>For an arbitrary span <tex>\Gamma   \in   \mathbf{Sp}</tex>, elements <tex>n  \in   \mathbf{Tm} ( \Gamma ;  \mathbf{N} )</tex> are right inverses of <tex>p :  \Gamma . \mathbf{N}   \to   \Gamma</tex>, which are in bijection with span morphisms from <tex>\Gamma</tex> to the constant span <tex>\mathbb{N}   \leftarrow   \mathbb{N}   \rightarrow   \mathbb{N}</tex>, which are in bijection with two functions <tex>n_L :  \Gamma _L  \to   \mathbb{N}</tex> and <tex>n_R :  \Gamma _R  \to   \mathbb{N}</tex> such that <tex>n_L(x) = n_R(y)</tex> whenever <tex>x  \in   \Gamma _L</tex> and <tex>y  \in   \Gamma _R</tex> are related (by some element of <tex>\Gamma _C</tex>).</p><p>Informally, in the language of spans an element of the natural number type <tex>\mathbf{N}</tex> (and similarly the unit <tex>\mathbf{1}</tex> and empty type <tex>\mathbf{0}</tex>) is a pair of actual natural numbers that are equal in related contexts.</p></mainmatter> </tree><p>The constructor and eliminator for the natural number type are also defined in a pointwise manner in an essentially straightforward way, except that the machinery of type dependency in CwFs brings in some complication: 
<ul><li>There are constructors <tex>z :  \mathbf{1} _{ }   \to   \mathbf{1} _{ } . \mathbf{N}   \in   \mathbf{Tm} ( \mathbf{1} _{ } ;  \mathbf{N} )</tex><tex display="block">z_X(*) =  { \left \langle   *, 0   \right \rangle }   \text{ for }  X  \in   \mathbf{S} ^{ \mathsf{o} }</tex>and <tex>s :  \mathbf{1} _{ } . \mathbf{N}   \to   \mathbf{1} _{ } . \mathbf{N} . \mathbf{N}   \in   \mathbf{Tm} ( \mathbf{1} _{ } . \mathbf{N} ;  \mathbf{N} )</tex><tex display="block">s_X(*, n) =  { \left \langle   *, n, n+1   \right \rangle }   \text{ for }  X  \in   \mathbf{S} ^{ \mathsf{o} } .</tex></li><li>There is an eliminator for every <tex>\Gamma   \in   \mathbf{Sp}</tex> and <tex>B  \in   \mathbf{Ty} ( \Gamma . \mathbf{N} )</tex>, given two terms
<tex display="block">\bar{z}   \in   \mathbf{Tm} ( \Gamma ;  { \left \langle   1 _{ \Gamma } , z   \right \rangle } ^*B) \quad \text{and} \quad \bar{s}   \in   \mathbf{Tm} ( \Gamma . \mathbf{N} .B; s'^*B),
</tex>where <tex>s' :  \Gamma . \mathbf{N} .B  \to   \Gamma . \mathbf{N}</tex> is the morphism that increments the <tex>\mathbf{N}</tex> and discards the <tex>B</tex>,
we have a term <tex>\mathit{rec}  :  \Gamma . \mathbf{N}   \to   \Gamma . \mathbf{N} .B  \in   \mathbf{Tm} ( \Gamma . \mathbf{N} ; B)</tex>:
<tex display="block">\begin{align*}    \mathit{rec} _X( \rho , n) =  \mathbb{N} \textit{-rec} \, (&amp;  { \left \langle   \rho , 0,  \pi _2 ( \bar{z} _X( \rho ))   \right \rangle } ,  \\ &amp;  \lambda   { \left \langle   \rho , m, b   \right \rangle } . \  { \left \langle   \rho , m+1,  \pi _4( \bar{s} _X( \rho , m, b))   \right \rangle } , \\  &amp; n) \end{align*}</tex>for <tex>X  \in   { \left \{ L, C, R \right \} }</tex>, where <tex>\mathbb{N} \textit{-rec}</tex> is the recursor of natural numbers on <em>sets</em>:
<tex display="block">\mathbb{N} \textit{-rec}  : S  \to  (S  \to  S)  \to   \mathbb{N}   \to  S.</tex> 
</li></ul></p></mainmatter> </tree><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>7</crumb> <crumb>2</crumb></trail> <anchor>524</anchor>   <addr>zyang-000L</addr>  <route>zyang-000L.xml</route> <date><year>2023</year> <month>10</month> <day>4</day></date>  <title>Dependent sums of spans</title> </frontmatter> <mainmatter><p>For every set <tex>A</tex> and <tex>A</tex>-indexed family of sets <tex>B(a)</tex>, we denote the set of their dependent sum using the following notation:
<tex display="block">\sigma ( x  \in  A  . \  B(x) )   \coloneqq   { \left \{ { \left \langle   a, b   \right \rangle }   \mid  a  \in  A, b  \in  B(a) \right \} }</tex></p><p>For every span <tex>\Gamma   \in   \mathbf{Sp}</tex>, <tex>A  \in   \mathbf{Ty} ( \Gamma )</tex>, and <tex>B  \in   \mathbf{Ty} ( \Gamma .A)</tex> (i.e. <tex>A :  \Gamma   \to   \dot{\mathcal{U}}</tex> and <tex>B :  \Gamma .A  \to   \dot{\mathcal{U}}</tex>), the <em>dependent sum</em> of <tex>A</tex> and <tex>B</tex> is an element <tex>\Sigma  A B :  \Gamma   \to   \dot{\mathcal{U}}</tex> of <tex>\mathbf{Ty} ( \Gamma )</tex>:
<tex display="block">\begin{align*} \left ( \Sigma  A B \right )_L(x) &amp;=  \sigma ( a  \in  A_L(x)  . \  B_L(x, a) ) \\ \left ( \Sigma  A B \right )_R(y) &amp;=  \sigma ( a  \in  A_R(y)  . \  B_R(y, a) ) \end{align*}</tex>and <tex>( \Sigma  A B)_C(p)</tex> is the span whose middle set is
<tex display="block">M  \coloneqq   \sigma ( q  \in  (A_C(p))_C  . \   (B_C(p, q))_C  )</tex>with a right leg 
<tex display="block">\begin{align*} M &amp; \to   \left ( \Sigma  A B)_R( \Gamma _r(p) \right )  \\ { \left \langle   q, s   \right \rangle }  &amp; \mapsto   { \left \langle   A_C(p)_r(q), B_C (p, q)_r (s)   \right \rangle } \end{align*}</tex>and a symmetric left leg. The reader might want to pause to check that the definition above makes sense by the naturality of <tex>A</tex> and <tex>B</tex>.</p><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>7</crumb> <crumb>2</crumb> <crumb>1</crumb></trail> <anchor>525</anchor>  <taxon>Proposition</taxon> <addr>zyang-000O</addr>  <route>zyang-000O.xml</route> <date><year>2023</year> <month>10</month> <day>5</day></date>  <title>Naturality of sum types</title> </frontmatter> <mainmatter><p>It is not very difficult to check that substitution commutes with <tex>\Sigma</tex>-types: let <tex>\gamma  :  \Delta   \to   \Gamma</tex> be a morphism, we have the (strict) equality
<tex display="block">\gamma ^*  \Sigma  A B =  \Sigma  ( \gamma ^* A) (( \gamma ^{+})^* B)</tex>where <tex>\gamma ^+  \coloneqq   { \left \langle   \gamma   \circ  p, v   \right \rangle }  :  \Delta .( \gamma ^* A)  \to   \Gamma .A</tex> is given by the universal property of <tex>\Gamma .A</tex>.
</p></mainmatter> </tree><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>7</crumb> <crumb>2</crumb> <crumb>2</crumb></trail> <anchor>526</anchor>  <taxon>Proposition</taxon> <addr>zyang-000M</addr>  <route>zyang-000M.xml</route> <date><year>2023</year> <month>10</month> <day>4</day></date>  <title>Universal property of dependent sum of spans</title> </frontmatter> <mainmatter><p>It can be checked that the definition of <tex>\Sigma  A B</tex> above satisfies that for every <tex>f :  \Delta   \to   \Gamma</tex> there is a canonical bijection
<tex display="block">\mathbf{Tm} ( \Delta ; f^*( \Sigma  A B))  \cong   \sigma ( a  \in   \mathbf{Tm} ( \Delta ; f^* A)  . \    \mathbf{Tm} ( \Delta ;  { \left \langle   f, a   \right \rangle } ^* B) )</tex>where we write <tex>f^*</tex> for the action <tex>\mathbf{Ty} (f) :  \mathbf{Ty} ( \Gamma )  \to   \mathbf{Ty} ( \Delta )</tex> and <tex>{ \left \langle   f, a   \right \rangle }  :  \Delta   \to   \Gamma .A</tex> for the morphism given by the universal property of <tex>\Gamma .A</tex>.
Additionally, when we regard both sides of isomorphism above as functors <tex>{ \mathbf{Sp} } _{ / \Gamma }   \to   \mathbf{Set}</tex>, it is a natural isomorphism.</p><p>This natural isomorphism underlies the term formers and eliminators of sum types. Letting <tex>f</tex> in the isomorphism be the projection <tex>p :  \Gamma . \Sigma  A B  \to   \Gamma</tex>, there is always a term <tex>v :  \mathbf{Tm} ( \Gamma . \Sigma  A B; p^*( \Sigma  A B))</tex> which uses the variable of type <tex>\Sigma  A B</tex> in the context <tex>\Gamma . \Sigma  A B</tex>. This term under the isomorphism gives rise to elements
<tex display="block">\begin{align*} \pi _1 &amp; \in   \mathbf{Tm} ( \Gamma . \Sigma  A B, p^* A)  \\ \pi _2 &amp; \in   \mathbf{Tm} ( \Gamma . \Sigma  A B,  { \left \langle   p,  \pi _1   \right \rangle } ^* B) \end{align*}</tex>that are the first projection and second projection of dependent sums.
From the other direction, letting <tex>f</tex> be the identity <tex>\Gamma   \to   \Gamma</tex>, this isomorphism implies that an element <tex>a  \in   \mathbf{Tm} ( \Gamma ; A)</tex> and an element of <tex>\mathbf{Tm} ( \Gamma ;  { \left \langle   1 _{ \Gamma } , a   \right \rangle } ^* B)</tex> can be <em>paired</em> to form an element of <tex>\Sigma  A B</tex> in the context <tex>\Gamma</tex>.
Finally, the naturality of this isomorphism guarantees that substitution commutes with the projections and pairing.
</p></mainmatter> </tree></mainmatter> </tree><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>7</crumb> <crumb>3</crumb></trail> <anchor>527</anchor>   <addr>zyang-000R</addr>  <route>zyang-000R.xml</route> <date><year>2023</year> <month>10</month> <day>6</day></date>  <title>Dependent functions of spans</title> </frontmatter> <mainmatter><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>7</crumb> <crumb>3</crumb> <crumb>1</crumb></trail> <anchor>528</anchor>   <addr>zyang-000S</addr>  <route>zyang-000S.xml</route> <date><year>2023</year> <month>10</month> <day>6</day></date>  <title>Exponentials of spans</title> </frontmatter> <mainmatter><p>Given two spans <tex>A, B  \in   \mathbf{Sp}</tex>, the exponential object <tex>A  \Rightarrow  B</tex> is the span
<tex display="block">(A_L  \Rightarrow _ \mathbf{Set}  B_L) \leftarrow \mathbf{hom} _{ \mathbf{Sp} } { \left ( A , B \right )} \rightarrow (A_R  \Rightarrow _ \mathbf{Set}  B_R)</tex>where left leg is <tex>(h : A  \to  B)  \mapsto  (h_L : A_L  \to  B_L)</tex>, and the right leg is symmetric. The evaluation map <tex>\mathit{ev}  : (A  \Rightarrow  B)  \times  A  \to  B</tex> of the exponential is
<center><img src="resources/5265c37c7101f522f5865ecbcee8d5bc-web.svg"/></center>Given any <tex>f :  \Gamma   \times  A  \to  B</tex>, the 'abstraction morphism' <tex>\lambda  f :  \Gamma   \to  (A  \Rightarrow  B)</tex> is 
<center><img src="resources/4c082ea1b49034413627c4c1dab0bf99-web.svg"/></center></p></mainmatter> </tree></mainmatter> </tree></mainmatter> </tree></mainmatter> </tree></context> <related><tree expanded="false" show-heading="true" show-metadata="true" toc="false" root="false"><frontmatter> <anchor>529</anchor>   <addr>zyang-000D</addr>  <route>zyang-000D.xml</route> <date><year>2023</year> <month>9</month> <day>27</day></date> <authors> <contributor><link href="zyang.xml" type="local">Zhixuan Yang</link></contributor></authors> <title>Universes of spans</title> </frontmatter> <mainmatter><p>A <em>Grothendieck universe</em> <tex>\mathcal{U}</tex> of sets is basically a set of sets closed under all the usual set theoretic operations. If a set <tex>A</tex> is contained in <tex>\mathcal{U}</tex>, we say that it is <tex>\mathcal{U}</tex>-small. We can also define <em>small spans</em> and <em>small span morphisms</em> as follows.</p><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>8</crumb></trail> <anchor>530</anchor>  <taxon>Definition</taxon> <addr>zyang-000E</addr>  <route>zyang-000E.xml</route> <date><year>2023</year> <month>9</month> <day>27</day></date> <authors><author><link href="zyang.xml" type="local">Zhixuan Yang</link></author> </authors> <title>Small spans and small span morphisms</title> </frontmatter> <mainmatter><p>For every <link href="https://ncatlab.org/nlab/show/Grothendieck+universe" type="external"><em>Grothendieck universe</em></link> <tex>\mathcal{U}</tex> of sets, we call a span <em><tex>\mathcal{U}</tex>-small</em> if its three constituting sets are all elements of <tex>\mathcal{U}</tex>. Moreover, a morphism of spans <tex>h : B  \to  A</tex> is called <tex>\mathcal{U}</tex>-small if for every <tex>p : x  \mathrel{A}  y</tex> the following span is <tex>\mathcal{U}</tex>-small:
<tex display="block">h_L^{-1}(x)  \xleftarrow{q  \mathrel{\mapsto}  B_l(q) }  h_C^{-1}(p)  \xrightarrow{q  \mathrel{\mapsto}  B_r(q)}  h_R^{-1}(y)</tex>where <tex>f^{-1}(x)</tex> denotes the inverse image of a function.
</p></mainmatter> </tree><tree expanded="true" show-heading="true" show-metadata="false" toc="true" root="false"><frontmatter><trail><crumb>9</crumb></trail> <anchor>531</anchor>  <taxon>Intuition</taxon> <addr>zyang-000K</addr>  <route>zyang-000K.xml</route>   <title>Small span morphisms</title> </frontmatter> <mainmatter><p>A small span morphism <tex>h : B  \to  A</tex> should be understood as a <em>locally small span relative to <tex>A</tex></em>. The span <tex>B</tex> itself doesn't have to be small, but the sub-span of <tex>B</tex> sitting over every <tex>p : x  \mathrel{A}  y</tex> is small.</p></mainmatter> </tree><p>The <link href="hofmann-streicher-1997.xml" type="local" title="Hofmann-Streicher lifting"><em>Hofmann-Streicher lifting</em></link> <tex>\dot{\mathcal{U}}</tex> of a Grothendieck universe <tex>\mathcal{U}</tex> of sets to the category of spans is the following span:
<tex display="block">\dot{\mathcal{U}}   \coloneqq   \left ( \mathcal{U}   \xleftarrow{\mathsf{dom} _{ }}   \mathcal{S} _ \mathcal{U}   \xrightarrow{\mathsf{cod} _{ }}   \mathcal{U}   \right ).</tex>where <tex>\mathcal{S} _ \mathcal{U}</tex> is the set of all <tex>\mathcal{U}</tex>-small spans. (Clearly, <tex>\dot{\mathcal{U}}</tex> itself is not <tex>\mathcal{U}</tex>-small.)</p><p>There is also a lifting of
the <em>pointed universe</em> <tex>\mathcal{U} ^ \bullet   \coloneqq   { \left \{ { \left \langle   X, x   \right \rangle }   \mid  X  \in   \mathcal{U} , x  \in  A \right \} }</tex> to the category of spans, which is 
<tex display="block">\dot{\mathcal{U}} ^ \bullet   \coloneqq   \left ( \mathcal{U} ^ \bullet   \leftarrow   { \left \{ { \left \langle   A, p   \right \rangle }   \mid  A  \in   \mathcal{S} _ \mathcal{U} , p  \in  A_C \right \} }   \rightarrow   \mathcal{U} ^ \bullet   \right )</tex>where the two legs of the span are respectively
<tex display="block">{ { \left \langle   A,p   \right \rangle }   \mapsto   { \left \langle   \mathsf{dom} _{ } A, A_l(p)   \right \rangle } }  \quad \text{and} \quad  { { \left \langle   A,p   \right \rangle }   \mapsto   { \left \langle   \mathsf{cod} _{ } A, A_r(p)   \right \rangle } }.</tex>There is an evident morphism <tex>\pi  :  \dot{\mathcal{U}} ^ \bullet   \to   \dot{\mathcal{U}}</tex> of spans that projects out the first components.</p><p>The universal property of Hofmann-Streicher lifting <tex>\mathcal{U}</tex> is that it <em>weakly classifies</em> <tex>\mathcal{U}</tex>-small morphisms:</p> 
<ol><li><p>For every <tex>\mathcal{U}</tex>-small morphism <tex>h : A  \to   \Gamma</tex> of spans, there exists a (not necessarily unique) pullback square:</p><center><img src="resources/8fe6324415853484589ec002fcc45028-web.svg"/></center><p>In particular, we can let <tex>\bar{h}</tex> be the following span morphism:
<tex display="block">\begin{align*} \bar{h} _L(x) &amp;= h^{-1}_L(x)  \in   \mathcal{U} \\  
 \bar{h} _C(p) &amp;=  \left ( h_L^{-1}( \Gamma _l(p))  \leftarrow  h_C^{-1}(p)  \rightarrow  h_R^{-1}( \Gamma _r(p))   \right )  \in   \mathcal{S} _ \mathcal{U}   \\  
 \bar{h} _R(y) &amp;= h^{-1}_R(y)  \in   \mathcal{U} \end{align*}</tex></p>where the two legs of <tex>\bar{h} _C(p)</tex> are the restriction of <tex>A_l</tex> and <tex>A_r</tex> respectively.
The definition of the top arrow <tex>A  \to   \dot{\mathcal{U}} ^ \bullet</tex> in the diagram above can be worked out from <tex>\bar{h}</tex>.
</li><li><p>And conversely, every such pullback square satisfies that <tex>h</tex> is <tex>\mathcal{U}</tex>-small. To see this, we can make a specific choice of pulling back <tex>\pi</tex> along any morphism <tex>k :  \Gamma   \to   \dot{\mathcal{U}}</tex> as follows:</p><p>We define <tex>k^*( \dot{\mathcal{U}} ^ \bullet )</tex> to be the span
<tex display="block">\begin{gather*} { \left \{ { \left \langle   x, x'   \right \rangle }   \mid  x  \in   \Gamma _L, x'  \in  k_L(x) \right \} }   \\ \uparrow   \\ { \left \{ { \left \langle   p, p'   \right \rangle }   \mid  p  \in   \Gamma _C, p'  \in  (k_C(p))_C  \right \} }   \\ \downarrow \\ { \left \{ { \left \langle   y, y'   \right \rangle }   \mid  y  \in   \Gamma _R, y'  \in  k_R(y) \right \} } \end{gather*}</tex>where the left leg is <tex>{ \left \langle   p, p'   \right \rangle }   \mapsto   { \left \langle   \Gamma _l(p), (k_C(p))_l(p')   \right \rangle }</tex> and the right leg is similar. This definition makes sense because the naturality of <tex>k</tex> ensures that <tex>k_L(x)</tex> and <tex>(k_C(p))_L</tex> are the same set for every <tex>p : x  \mathrel{\Gamma}  y</tex>. We define the map <tex>k^*( \pi ) : k^*( \dot{\mathcal{U}} ^ \bullet )  \to   \Gamma</tex> to be the evident map that projects out the first component. It can be quickly checked that <tex>k^*( \pi )</tex> is a pullback of <tex>\pi</tex> along <tex>k</tex> and it is <tex>\mathcal{U}</tex>-small:</p><center><img src="resources/03e337d97fde38c18c1b6234f990db95-web.svg"/></center></li></ol></mainmatter> </tree></related> <backlinks/> <references/></backmatter></tree>